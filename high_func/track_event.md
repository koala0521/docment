# 自定义事件接入指南

----

### 1. 定义和用途

自定义事件，用于记录用户操作行为的具体细节，具体的，开发者可通过在代码中埋点的方式统计自己期望了解的快应用数据，如：用户是否点击某功能按钮、是否填写某个输入框、是否触发了某个广告等，甚至可以用来统计一段特定的代码是否被执行。通过对自定义事件进行分析，可以对用户在快应用内的行为做精细化运营，满足页面访问等基础统计以外的个性化分析需求。

### 2. 打点接口及埋点说明

#### 2.1 接口说明

打点接口：

```javascript

    APP_STATISTICS.track_event(id,attr);

```

  该方法接收两个参数，第一个参数 `id` 为事件`ID`（必传）。第二个参数 `attr` 为事件携带参数（非必传）。该参数可以为一个字符串( `String` )或者一个 `JavaScript` 对象 ( `Object` )。

 - 事件 `ID（id）`：
    事件的唯一标识符，不可重复。
    
    登录 [轻粒子官网](http://www.qinglizi.cn/account/login) ,点击`[ 我的数据 ] > [ 高级功能 ] > [ 自定义事件 ] > [ 创建自定义事件 ]` 可获取事件`id`；
    
    注意，事件id是用户自己创建的，命名规则：支持数字、中文、字母及下划线的组合，长度必须小于 `255` 字符。

 - 参数（`attr`）：
    事件携带参数，非必传。规则如下：

    A. 参数为 `string` 时，支持数字、中文、字母及下划线的组合，长度必须小于 `255` 字符；

    B. 参数为 `object` 类型时，该对象的 `key` 对应的 `value` 值只能为 `string` 类型。

    C. 满足上述规则时，`SDK `才会上报事件及其参数。否则 `SDK` 不会上报。


#### 2.2 埋点方式


A. 仅统计事件，无参数时，可使用如下方法：

```javascript

    APP_STATISTICS.track_event('事件id');

```

B. 统计事件携带参数，且参数为字符串也即 `string` 时：：

```javascript

    APP_STATISTICS.track_event('事件id' , '参数' );

```

C. 统计事件携带参数，且参数为 `object` 时：

```javascript

    APP_STATISTICS.track_event('事件id' , {
        参数_1: '参数值',
        参数_2: '参数值'        
    });

```


### 3. 注意事项

1. 避免在统计代码初始化完成之前，增加自定义事件埋点，会造成数据不准确；
2. 当自定义埋点需要放在组件的生命周期中执行时，为了确保数据准确应该在 `onShow` 函数中埋点；
3. 调试过程中，发现控制台出现 `"event error：...."` 警告时，请检查事件 `id` 或者事件参数格式。

